import{f as mt,s as ue,h as Fe,n as re,r as Re,b as Y,i as ne,o as _t}from"../chunks/scheduler.55c78a69.js";import{S as fe,i as ce,g as b,s as E,m as $,h as w,j as k,c as F,n as ee,f as m,k as g,a as U,y as p,z as X,d as j,p as Be,t as G,b as Ge,o as ae,A as le,B as ge,C as ke,D as vt,E as se,r as z,u as Z,F as tt,v as K,G as Vt,H as Ue,w as J,I as Ot,l as nt}from"../chunks/index.1f054d5d.js";import{w as jt}from"../chunks/index.60a66664.js";function me(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function bt(n){var e=0,t={},s=URL.createObjectURL(new Blob(["$$="+n+";onmessage="+function(a){Promise.resolve(a.data[1]).then(function(i){return $$.apply($$,i)}).then(function(i){postMessage([a.data[0],0,i],[i].filter(function(u){return u instanceof ArrayBuffer||u instanceof MessagePort||self.ImageBitmap&&u instanceof ImageBitmap}))},function(i){postMessage([a.data[0],1,""+i])})}])),l=new Worker(s);return l.onmessage=function(a){t[a.data[0]][a.data[1]](a.data[2]),t[a.data[0]]=null},function(a){return a=[].slice.call(arguments),new Promise(function(){t[++e]=arguments,l.postMessage([e,a],a.filter(function(i){return i instanceof ArrayBuffer||i instanceof MessagePort||self.ImageBitmap&&i instanceof ImageBitmap}))})}}const At=bt(async(n,e,t)=>{let s=n;for(let l=0;l<t;l++){let a="";for(let i=0;i<s.length;i++){let u=s.charAt(i);u in e?a+=e[u]:a+=u}s=a}return s});let Oe=0;const Ce=jt(!1),wt=async(n=!1)=>{n?await new Promise(e=>setTimeout(e,50)):Oe<5?Oe++:(Oe=0,await new Promise(e=>setTimeout(e,50)))},Bt=async n=>{let e=n.initialX,t=n.initialY,s=0;const l=[],{ctx:a,strokeLength:i,angle:u}=n;for(let o=0;o<n.expression.length;o++){const r=n.actions[n.expression.charAt(o)];if(r)for(const f of r){if(!mt(Ce))return;switch(f){case"draw":await wt();let c=e+Math.cos(s)*i,d=t+Math.sin(s)*i;a.moveTo(e,t),a.lineTo(c,d),a.stroke(),a.closePath(),e=c,t=d;break;case"right":s+=u;break;case"left":s-=u;break;case"push":l.push({x:e,y:t,currentRotation:s});break;case"pop":const y=l.pop();e=y.x,t=y.y,s=y.currentRotation;break}}}},xt=new Set(["draw","right","left","push","pop"]);function st(n,e){return n?e:""}function ye(n){return n.replace(/\s+/g,"")}function Ct(n){const e={};try{for(let t of n.split(";")){if(t=ye(t),!t||t===`
`)continue;if((t.match(/=/g)||[]).length!=1)return[e,'Problem with =. Did you miss a ";" or a "="?'];const[s,l]=t.split("=");if(!s)return[Ct,`Key missing for value ${l}`];if(!l)return[e,`Value missing for key ${s}`];e[ye(s)]=ye(l)}}catch(t){return[e,t]}return[e,""]}function Gt(n){const e={};try{for(let t of n.split(";")){if(t=ye(t),!t||t===`
`)continue;if((t.match(/=/g)||[]).length!=1)return[e,"Problem with =. Did you miss a ; or a =?"];const[s,l]=t.split("=");let a=ye(l);if(!a.startsWith("[")||!a.endsWith("]"))return[e,"invalid brackets with []"];a=a.slice(1,-1);const i=a.split(",");for(const u of i)if(!xt.has(u))return[e,`uknown value ${u}`];e[s]=i}}catch(t){return[e,t]}return[e,""]}function Pt(n){let e="";for(const[t,s]of Object.entries(n))e+=`${t}=${s};
`;return e.trim()}function Lt(n){let e="";for(const[t,s]of Object.entries(n))e+=`${t}=[`,e+=s.join(","),e+=`];
`;return e.trim()}function Xt(n){return n.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Rt(n){const e=n-1;return e*e*e+1}function _e(n,{delay:e=0,duration:t=400,easing:s=Rt,axis:l="y"}={}){const a=getComputedStyle(n),i=+a.opacity,u=l==="y"?"height":"width",o=parseFloat(a[u]),r=l==="y"?["top","bottom"]:["left","right"],f=r.map(T=>`${T[0].toUpperCase()}${T.slice(1)}`),c=parseFloat(a[`padding${f[0]}`]),d=parseFloat(a[`padding${f[1]}`]),y=parseFloat(a[`margin${f[0]}`]),A=parseFloat(a[`margin${f[1]}`]),S=parseFloat(a[`border${f[0]}Width`]),M=parseFloat(a[`border${f[1]}Width`]);return{delay:e,duration:t,easing:s,css:T=>`overflow: hidden;opacity: ${Math.min(T*20,1)*i};${u}: ${T*o}px;padding-${r[0]}: ${T*c}px;padding-${r[1]}: ${T*d}px;margin-${r[0]}: ${T*y}px;margin-${r[1]}: ${T*A}px;border-${r[0]}-width: ${T*S}px;border-${r[1]}-width: ${T*M}px;`}}function lt(n){let e,t='<svg aria-hidden="true" class="w-5 h-5 mr-2 text-gray-500 animate-spin dark:text-gray-600 fill-blue-700" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>',s,l;return{c(){e=b("div"),e.innerHTML=t,this.h()},l(a){e=w(a,"DIV",{role:!0,"data-svelte-h":!0}),le(e)!=="svelte-143ow5j"&&(e.innerHTML=t),this.h()},h(){g(e,"role","status")},m(a,i){U(a,e,i),l=!0},i(a){l||(a&&Fe(()=>{l&&(s||(s=ge(e,_e,{axis:"x"},!0)),s.run(1))}),l=!0)},o(a){a&&(s||(s=ge(e,_e,{axis:"x"},!1)),s.run(0)),l=!1},d(a){a&&m(e),a&&s&&s.end()}}}function Ut(n){let e,t,s,l,a,i,u,o=n[0]&&lt();return{c(){e=b("button"),o&&o.c(),t=E(),s=b("div"),l=$(n[2]),this.h()},l(r){e=w(r,"BUTTON",{type:!0,class:!0});var f=k(e);o&&o.l(f),t=F(f),s=w(f,"DIV",{});var c=k(s);l=ee(c,n[2]),c.forEach(m),f.forEach(m),this.h()},h(){g(e,"type","submit"),g(e,"class",a="w-fit px-4 py-2 text-sm text-white bg-blue-500 rounded-full shadow shadow-black transition-colors duration-300 flex flex-row "+st(n[0],"bg-blue-900 cursor-default shadow-none"))},m(r,f){U(r,e,f),o&&o.m(e,null),p(e,t),p(e,s),p(s,l),i||(u=X(e,"pointerup",n[3]),i=!0)},p(r,[f]){r[0]?o?f&1&&j(o,1):(o=lt(),o.c(),j(o,1),o.m(e,t)):o&&(Be(),G(o,1,1,()=>{o=null}),Ge()),f&4&&ae(l,r[2]),f&1&&a!==(a="w-fit px-4 py-2 text-sm text-white bg-blue-500 rounded-full shadow shadow-black transition-colors duration-300 flex flex-row "+st(r[0],"bg-blue-900 cursor-default shadow-none"))&&g(e,"class",a)},i(r){j(o)},o(r){G(o)},d(r){r&&m(e),o&&o.d(),i=!1,u()}}}function qt(n,e,t){let{loading:s=!1}=e,{onClick:l=()=>{}}=e,{text:a="Submit"}=e;const i=async()=>{t(0,s=!0),await l(),t(0,s=!1)};return n.$$set=u=>{"loading"in u&&t(0,s=u.loading),"onClick"in u&&t(1,l=u.onClick),"text"in u&&t(2,a=u.text)},[s,l,a,i]}class yt extends fe{constructor(e){super(),ce(this,e,qt,Ut,ue,{loading:0,onClick:1,text:2})}}function Nt(n){let e,t,s,l,a,i,u;return{c(){e=b("div"),t=b("div"),s=$(n[1]),l=E(),a=b("input"),this.h()},l(o){e=w(o,"DIV",{class:!0});var r=k(e);t=w(r,"DIV",{class:!0});var f=k(t);s=ee(f,n[1]),f.forEach(m),l=F(r),a=w(r,"INPUT",{type:!0,class:!0,placeholder:!0}),r.forEach(m),this.h()},h(){g(t,"class","w-[200px] text-sm mr-5"),g(a,"type","number"),g(a,"class","w-full h-full px-2 py-1 bg-gray-500 rounded bg-opacity-10"),g(a,"placeholder",n[1]),g(e,"class","flex flex-row items-center h-10")},m(o,r){U(o,e,r),p(e,t),p(t,s),p(e,l),p(e,a),ke(a,n[0]),i||(u=X(a,"input",n[2]),i=!0)},p(o,[r]){r&2&&ae(s,o[1]),r&2&&g(a,"placeholder",o[1]),r&1&&vt(a.value)!==o[0]&&ke(a,o[0])},i:re,o:re,d(o){o&&m(e),i=!1,u()}}}function Ht(n,e,t){let{label:s}=e,{value:l}=e;function a(){l=vt(this.value),t(0,l)}return n.$$set=i=>{"label"in i&&t(1,s=i.label),"value"in i&&t(0,l=i.value)},[l,s,a]}class je extends fe{constructor(e){super(),ce(this,e,Ht,Nt,ue,{label:1,value:0})}}function Wt(n){let e,t,s,l,a,i,u;return{c(){e=b("label"),t=b("div"),s=$(n[1]),l=E(),a=b("textarea"),this.h()},l(o){e=w(o,"LABEL",{class:!0});var r=k(e);t=w(r,"DIV",{class:!0});var f=k(t);s=ee(f,n[1]),f.forEach(m),l=F(r),a=w(r,"TEXTAREA",{class:!0,placeholder:!0}),k(a).forEach(m),r.forEach(m),this.h()},h(){g(t,"class","text-sm"),g(a,"class","w-full h-auto px-2 py-1 overflow-hidden bg-gray-500 rounded bg-opacity-10"),g(a,"placeholder",n[2]),g(e,"class","flex flex-col w-full")},m(o,r){U(o,e,r),p(e,t),p(t,s),p(e,l),p(e,a),ke(a,n[0]),n[7](a),i||(u=[X(a,"input",n[6]),X(a,"input",n[8])],i=!0)},p(o,[r]){r&2&&ae(s,o[1]),r&4&&g(a,"placeholder",o[2]),r&1&&ke(a,o[0])},i:re,o:re,d(o){o&&m(e),n[7](null),i=!1,Re(u)}}}function Yt(n,e,t){let{label:s}=e,{value:l}=e,{placeholder:a}=e,{onInput:i=()=>{}}=e,u;async function o(){u&&(await new Promise(d=>setTimeout(d,0)),t(4,u.style.height="auto",u),t(4,u.style.height=u.scrollHeight+"px",u))}function r(){l=this.value,t(0,l)}function f(d){Y[d?"unshift":"push"](()=>{u=d,t(4,u)})}const c=d=>{i(d),o()};return n.$$set=d=>{"label"in d&&t(1,s=d.label),"value"in d&&t(0,l=d.value),"placeholder"in d&&t(2,a=d.placeholder),"onInput"in d&&t(3,i=d.onInput)},n.$$.update=()=>{n.$$.dirty&1&&o()},[l,s,a,i,u,o,r,f,c]}class Ae extends fe{constructor(e){super(),ce(this,e,Yt,Wt,ue,{label:1,value:0,placeholder:2,onInput:3})}}const Pe={binary_tree:{axiom:"0",rules:{1:"11",0:"1[0]0"},actions:{0:["draw"],1:["draw"],"[":["push","left"],"]":["pop","right"]},defaults:{angle:45,iterationCount:7,length:3}},koch_curve:{axiom:"F",rules:{F:"F+F-F-F+F"},actions:{F:["draw"],"+":["left"],"-":["right"]},defaults:{angle:90,iterationCount:3,length:5}},sierpinski_triangle:{axiom:"F-G-G",rules:{F:"F-G+F+G-F",G:"GG"},actions:{F:["draw"],G:["draw"],"+":["left"],"-":["right"]},defaults:{angle:120,iterationCount:4,length:20}},dragon_curve:{axiom:"F",rules:{F:"F+G",G:"F-G"},actions:{F:["draw"],G:["draw"],"+":["left"],"-":["right"]},defaults:{angle:90,iterationCount:8,length:16}},fractal_plant:{axiom:"X",rules:{X:"F+[[X]-X]-F[-FX]+X",F:"FF"},actions:{F:["draw"],"+":["left"],"-":["right"],"[":["push"],"]":["pop"]},defaults:{angle:25,iterationCount:4,length:17}}};function at(n,e,t){const s=n.slice();return s[20]=e[t][0],s[21]=e[t][1],s}function it(n,e,t){const s=n.slice();return s[20]=e[t][0],s[21]=e[t][1],s}function rt(n,e,t){const s=n.slice();return s[21]=e[t],s}function ot(n){let e,t=Xt(n[21])+"",s;return{c(){e=b("option"),s=$(t),this.h()},l(l){e=w(l,"OPTION",{});var a=k(e);s=ee(a,t),a.forEach(m),this.h()},h(){e.__value=n[21],ke(e,e.__value)},m(l,a){U(l,e,a),p(e,s)},p:re,d(l){l&&m(e)}}}function ut(n){let e,t;return{c(){e=b("div"),t=$(n[6]),this.h()},l(s){e=w(s,"DIV",{class:!0});var l=k(e);t=ee(l,n[6]),l.forEach(m),this.h()},h(){g(e,"class","text-sm italic text-red-500")},m(s,l){U(s,e,l),p(e,t)},p(s,l){l&64&&ae(t,s[6])},d(s){s&&m(e)}}}function ft(n){let e,t;return{c(){e=b("div"),t=$(n[7]),this.h()},l(s){e=w(s,"DIV",{class:!0});var l=k(e);t=ee(l,n[7]),l.forEach(m),this.h()},h(){g(e,"class","text-sm italic text-red-500")},m(s,l){U(s,e,l),p(e,t)},p(s,l){l&128&&ae(t,s[7])},d(s){s&&m(e)}}}function ct(n){let e,t,s="Rules:",l,a,i,u=me(Object.entries(n[0].rules)),o=[];for(let r=0;r<u.length;r+=1)o[r]=ht(it(n,u,r));return{c(){e=b("div"),t=b("div"),t.textContent=s,l=E();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=w(r,"DIV",{class:!0});var f=k(e);t=w(f,"DIV",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-m4px0i"&&(t.textContent=s),l=F(f);for(let c=0;c<o.length;c+=1)o[c].l(f);f.forEach(m),this.h()},h(){g(t,"class","text-sm"),g(e,"class","flex flex-col gap-2 w-min")},m(r,f){U(r,e,f),p(e,t),p(e,l);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);i=!0},p(r,f){if(f&1){u=me(Object.entries(r[0].rules));let c;for(c=0;c<u.length;c+=1){const d=it(r,u,c);o[c]?o[c].p(d,f):(o[c]=ht(d),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=u.length}},i(r){i||(r&&Fe(()=>{i&&(a||(a=ge(e,_e,{},!0)),a.run(1))}),i=!0)},o(r){r&&(a||(a=ge(e,_e,{},!1)),a.run(0)),i=!1},d(r){r&&m(e),Ue(o,r),r&&a&&a.end()}}}function ht(n){let e,t,s=n[20]+"",l,a,i,u=n[21]+"",o,r;return{c(){e=b("div"),t=b("div"),l=$(s),a=E(),i=b("div"),o=$(u),r=E(),this.h()},l(f){e=w(f,"DIV",{class:!0});var c=k(e);t=w(c,"DIV",{class:!0});var d=k(t);l=ee(d,s),d.forEach(m),a=F(c),i=w(c,"DIV",{class:!0});var y=k(i);o=ee(y,u),y.forEach(m),r=F(c),c.forEach(m),this.h()},h(){g(t,"class","px-2 py-1 bg-gray-100 rounded whitespace-nowrap"),g(i,"class","w-full px-2 py-1 text-center bg-gray-100 rounded whitespace-nowrap"),g(e,"class","flex flex-row w-full gap-2")},m(f,c){U(f,e,c),p(e,t),p(t,l),p(e,a),p(e,i),p(i,o),p(e,r)},p(f,c){c&1&&s!==(s=f[20]+"")&&ae(l,s),c&1&&u!==(u=f[21]+"")&&ae(o,u)},d(f){f&&m(e)}}}function pt(n){let e,t,s="Actions:",l,a,i,u=me(Object.entries(n[0].actions)),o=[];for(let r=0;r<u.length;r+=1)o[r]=dt(at(n,u,r));return{c(){e=b("div"),t=b("div"),t.textContent=s,l=E();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=w(r,"DIV",{class:!0});var f=k(e);t=w(f,"DIV",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-1gmszym"&&(t.textContent=s),l=F(f);for(let c=0;c<o.length;c+=1)o[c].l(f);f.forEach(m),this.h()},h(){g(t,"class","text-sm"),g(e,"class","flex flex-col gap-2 w-min")},m(r,f){U(r,e,f),p(e,t),p(e,l);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);i=!0},p(r,f){if(f&1){u=me(Object.entries(r[0].actions));let c;for(c=0;c<u.length;c+=1){const d=at(r,u,c);o[c]?o[c].p(d,f):(o[c]=dt(d),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=u.length}},i(r){i||(r&&Fe(()=>{i&&(a||(a=ge(e,_e,{},!0)),a.run(1))}),i=!0)},o(r){r&&(a||(a=ge(e,_e,{},!1)),a.run(0)),i=!1},d(r){r&&m(e),Ue(o,r),r&&a&&a.end()}}}function dt(n){let e,t,s=n[20]+"",l,a,i,u=n[21].join(" ")+"",o,r;return{c(){e=b("div"),t=b("div"),l=$(s),a=E(),i=b("div"),o=$(u),r=E(),this.h()},l(f){e=w(f,"DIV",{class:!0});var c=k(e);t=w(c,"DIV",{class:!0});var d=k(t);l=ee(d,s),d.forEach(m),a=F(c),i=w(c,"DIV",{class:!0});var y=k(i);o=ee(y,u),y.forEach(m),r=F(c),c.forEach(m),this.h()},h(){g(t,"class","px-2 py-1 bg-gray-100 rounded whitespace-nowrap"),g(i,"class","w-full px-2 py-1 text-center bg-gray-100 rounded whitespace-nowrap"),g(e,"class","flex flex-row w-full gap-2")},m(f,c){U(f,e,c),p(e,t),p(t,l),p(e,a),p(e,i),p(i,o),p(e,r)},p(f,c){c&1&&s!==(s=f[20]+"")&&ae(l,s),c&1&&u!==(u=f[21].join(" ")+"")&&ae(o,u)},d(f){f&&m(e)}}}function zt(n){let e,t,s,l="Choose a preset",a,i,u,o,r,f,c,d,y,A,S,M,T,R,x,v,D,I,C,W,q,ve,be,he,we,Q,De=Object.keys(n[0].rules).length!==0,Ie,Te=Object.keys(n[0].actions).length!==0,Se,te,Me,Ee,Ve,qe,pe=me(["",...Object.keys(Pe)]),B=[];for(let h=0;h<pe.length;h+=1)B[h]=ot(rt(n,pe,h));function It(h){n[10](h)}let Ne={placeholder:"FGG",label:"axiom"};n[0].axiom!==void 0&&(Ne.value=n[0].axiom),o=new Ae({props:Ne}),Y.push(()=>se(o,"value",It));function Et(h){n[11](h)}let He={placeholder:`F=FGFGF;
G=GG`,label:"rules"};n[2]!==void 0&&(He.value=n[2]),c=new Ae({props:He}),Y.push(()=>se(c,"value",Et));let P=n[6]&&ut(n);function Ft(h){n[12](h)}let We={placeholder:`F=[draw];
G=[left, draw]`,label:"actions: "+Array.from(xt).join(", ")};n[3]!==void 0&&(We.value=n[3]),S=new Ae({props:We}),Y.push(()=>se(S,"value",Ft));let L=n[7]&&ft(n);function Dt(h){n[13](h)}let Ye={label:"angle"};n[0].angle!==void 0&&(Ye.value=n[0].angle),x=new je({props:Ye}),Y.push(()=>se(x,"value",Dt));function Tt(h){n[14](h)}let ze={label:"iteration count"};n[0].iterationCount!==void 0&&(ze.value=n[0].iterationCount),I=new je({props:ze}),Y.push(()=>se(I,"value",Tt));function St(h){n[15](h)}let Ze={label:"length of each stroke"};n[0].length!==void 0&&(Ze.value=n[0].length),q=new je({props:Ze}),Y.push(()=>se(q,"value",St));let V=De&&ct(n),O=Te&&pt(n);function Mt(h){n[16](h)}let Ke={};return n[5]!==void 0&&(Ke.loading=n[5]),te=new yt({props:Ke}),Y.push(()=>se(te,"loading",Mt)),{c(){e=b("form"),t=b("label"),s=b("h2"),s.textContent=l,a=E(),i=b("select");for(let h=0;h<B.length;h+=1)B[h].c();u=E(),z(o.$$.fragment),f=E(),z(c.$$.fragment),y=E(),P&&P.c(),A=E(),z(S.$$.fragment),T=E(),L&&L.c(),R=E(),z(x.$$.fragment),D=E(),z(I.$$.fragment),W=E(),z(q.$$.fragment),be=E(),he=b("div"),we=E(),Q=b("div"),V&&V.c(),Ie=E(),O&&O.c(),Se=E(),z(te.$$.fragment),this.h()},l(h){e=w(h,"FORM",{class:!0});var _=k(e);t=w(_,"LABEL",{});var N=k(t);s=w(N,"H2",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1s8w4n8"&&(s.textContent=l),a=F(N),i=w(N,"SELECT",{class:!0});var xe=k(i);for(let de=0;de<B.length;de+=1)B[de].l(xe);xe.forEach(m),N.forEach(m),u=F(_),Z(o.$$.fragment,_),f=F(_),Z(c.$$.fragment,_),y=F(_),P&&P.l(_),A=F(_),Z(S.$$.fragment,_),T=F(_),L&&L.l(_),R=F(_),Z(x.$$.fragment,_),D=F(_),Z(I.$$.fragment,_),W=F(_),Z(q.$$.fragment,_),be=F(_),he=w(_,"DIV",{}),k(he).forEach(m),we=F(_),Q=w(_,"DIV",{class:!0});var oe=k(Q);V&&V.l(oe),Ie=F(oe),O&&O.l(oe),oe.forEach(m),Se=F(_),Z(te.$$.fragment,_),_.forEach(m),this.h()},h(){g(s,"class","text-sm"),g(i,"class","px-2 py-1 rounded"),n[4]===void 0&&Fe(()=>n[9].call(i)),g(Q,"class","flex flex-row justify-around w-full gap-2 mt-auto"),g(e,"class","flex flex-col gap-2 w-[400px] items-center p-5 rounded shadow shadow-black font-mono")},m(h,_){U(h,e,_),p(e,t),p(t,s),p(t,a),p(t,i);for(let N=0;N<B.length;N+=1)B[N]&&B[N].m(i,null);tt(i,n[4],!0),p(e,u),K(o,e,null),p(e,f),K(c,e,null),p(e,y),P&&P.m(e,null),p(e,A),K(S,e,null),p(e,T),L&&L.m(e,null),p(e,R),K(x,e,null),p(e,D),K(I,e,null),p(e,W),K(q,e,null),p(e,be),p(e,he),p(e,we),p(e,Q),V&&V.m(Q,null),p(Q,Ie),O&&O.m(Q,null),p(e,Se),K(te,e,null),Ee=!0,Ve||(qe=[X(i,"change",n[9]),X(i,"change",n[8]),X(e,"submit",Vt(n[17]))],Ve=!0)},p(h,[_]){if(_&0){pe=me(["",...Object.keys(Pe)]);let H;for(H=0;H<pe.length;H+=1){const et=rt(h,pe,H);B[H]?B[H].p(et,_):(B[H]=ot(et),B[H].c(),B[H].m(i,null))}for(;H<B.length;H+=1)B[H].d(1);B.length=pe.length}_&16&&tt(i,h[4]);const N={};!r&&_&1&&(r=!0,N.value=h[0].axiom,ne(()=>r=!1)),o.$set(N);const xe={};!d&&_&4&&(d=!0,xe.value=h[2],ne(()=>d=!1)),c.$set(xe),h[6]?P?P.p(h,_):(P=ut(h),P.c(),P.m(e,A)):P&&(P.d(1),P=null);const oe={};!M&&_&8&&(M=!0,oe.value=h[3],ne(()=>M=!1)),S.$set(oe),h[7]?L?L.p(h,_):(L=ft(h),L.c(),L.m(e,R)):L&&(L.d(1),L=null);const de={};!v&&_&1&&(v=!0,de.value=h[0].angle,ne(()=>v=!1)),x.$set(de);const Je={};!C&&_&1&&(C=!0,Je.value=h[0].iterationCount,ne(()=>C=!1)),I.$set(Je);const Qe={};!ve&&_&1&&(ve=!0,Qe.value=h[0].length,ne(()=>ve=!1)),q.$set(Qe),_&1&&(De=Object.keys(h[0].rules).length!==0),De?V?(V.p(h,_),_&1&&j(V,1)):(V=ct(h),V.c(),j(V,1),V.m(Q,Ie)):V&&(Be(),G(V,1,1,()=>{V=null}),Ge()),_&1&&(Te=Object.keys(h[0].actions).length!==0),Te?O?(O.p(h,_),_&1&&j(O,1)):(O=pt(h),O.c(),j(O,1),O.m(Q,null)):O&&(Be(),G(O,1,1,()=>{O=null}),Ge());const $e={};!Me&&_&32&&(Me=!0,$e.loading=h[5],ne(()=>Me=!1)),te.$set($e)},i(h){Ee||(j(o.$$.fragment,h),j(c.$$.fragment,h),j(S.$$.fragment,h),j(x.$$.fragment,h),j(I.$$.fragment,h),j(q.$$.fragment,h),j(V),j(O),j(te.$$.fragment,h),Ee=!0)},o(h){G(o.$$.fragment,h),G(c.$$.fragment,h),G(S.$$.fragment,h),G(x.$$.fragment,h),G(I.$$.fragment,h),G(q.$$.fragment,h),G(V),G(O),G(te.$$.fragment,h),Ee=!1},d(h){h&&m(e),Ue(B,h),J(o),J(c),P&&P.d(),J(S),L&&L.d(),J(x),J(I),J(q),V&&V.d(),O&&O.d(),J(te),Ve=!1,Re(qe)}}}function Zt(n,e,t){let{onSubmit:s}=e,{parameters:l}=e,a=!1,i="",u="",o="",r="",f;const c=()=>{t(0,l.axiom="",l),t(2,i=""),t(3,u=""),t(0,l.rules={},l),t(0,l.actions={},l),t(0,l.angle=null,l),t(0,l.iterationCount=null,l),t(0,l.length=null,l)},d=C=>t(4,f=C.target.value),y=()=>{const{axiom:C,rules:W,actions:q,defaults:ve}=Pe[f],{angle:be,iterationCount:he,length:we}=ve;t(0,l.axiom=C,l),t(2,i=Pt(W)),t(0,l.rules=W,l),t(3,u=Lt(q)),t(0,l.actions=q,l),t(0,l.angle=be,l),t(0,l.iterationCount=he,l),t(0,l.length=we,l)};function A(){f=Ot(this),t(4,f)}function S(C){n.$$.not_equal(l.axiom,C)&&(l.axiom=C,t(0,l),t(2,i),t(3,u))}function M(C){i=C,t(2,i)}function T(C){u=C,t(3,u)}function R(C){n.$$.not_equal(l.angle,C)&&(l.angle=C,t(0,l),t(2,i),t(3,u))}function x(C){n.$$.not_equal(l.iterationCount,C)&&(l.iterationCount=C,t(0,l),t(2,i),t(3,u))}function v(C){n.$$.not_equal(l.length,C)&&(l.length=C,t(0,l),t(2,i),t(3,u))}function D(C){a=C,t(5,a)}const I=async()=>{t(5,a=!0),await s(),t(5,a=!1)};return n.$$set=C=>{"onSubmit"in C&&t(1,s=C.onSubmit),"parameters"in C&&t(0,l=C.parameters)},n.$$.update=()=>{n.$$.dirty&4&&t(0,[l.rules,o]=Ct(i),l,(t(6,o),t(2,i))),n.$$.dirty&8&&t(0,[l.actions,r]=Gt(u),l,(t(7,r),t(3,u))),n.$$.dirty&16&&(f?y():c())},[l,s,i,u,f,a,o,r,d,A,S,M,T,R,x,v,D,I]}class Kt extends fe{constructor(e){super(),ce(this,e,Zt,zt,ue,{onSubmit:1,parameters:0})}}function Jt(n){let e,t=`<h2 class="text-xl">About</h2> <p class="svelte-2u0hii">Any unique character can be used as a <span class="svelte-2u0hii">variable</span>.</p> <p class="svelte-2u0hii">For <span class="svelte-2u0hii">rules</span>, separate each with a <span class="svelte-2u0hii">;</span> and use a
		<span class="svelte-2u0hii">=</span>.</p> <p class="svelte-2u0hii">For <span class="svelte-2u0hii">actions</span>, separate each with a <span class="svelte-2u0hii">;</span> and use a
		<span class="svelte-2u0hii">=</span>, but have it as one of the possible <span class="svelte-2u0hii">actions</span> below, with a
		<span class="svelte-2u0hii">[]</span>
		around, separated by <span class="svelte-2u0hii">,</span></p> <p class="svelte-2u0hii">The <span class="svelte-2u0hii">angle</span> parameter is used in each iteration, for every &quot;child&quot; node.</p> <p class="svelte-2u0hii">The <span class="svelte-2u0hii">iteration count</span> is the depth of the recursion to take place.</p> <p class="svelte-2u0hii">If unsure how things works, try out one of the <span class="svelte-2u0hii">presets</span>.</p>`;return{c(){e=b("section"),e.innerHTML=t,this.h()},l(s){e=w(s,"SECTION",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-qwlt5i"&&(e.innerHTML=t),this.h()},h(){g(e,"class","w-[400px] shadow shadow-black rounded p-5 flex flex-col gap-2 items-center")},m(s,l){U(s,e,l)},p:re,i:re,o:re,d(s){s&&m(e)}}}class Qt extends fe{constructor(e){super(),ce(this,e,null,Jt,ue,{})}}async function $t(n,e,t){mt(Ce)&&(Ce.set(!1),await wt(!0)),kt(n,e),e.strokeStyle="#000000",e.lineWidth=1,e.beginPath();const s=await At(t.axiom,t.rules,t.iterationCount);Ce.set(!0),Bt({expression:s,actions:t.actions,angle:t.angle*(Math.PI/180),strokeLength:t.length,initialX:n.width/2,initialY:n.height/2,ctx:e}).then(()=>Ce.set(!1))}const gt=20;function kt(n,e){e.fillStyle="#ffffff",e.clearRect(0,0,n.width,n.height),e.strokeStyle="#ccc",e.lineWidth=1;for(let t=0;t<=n.width;t+=gt)e.beginPath(),e.moveTo(t,0),e.lineTo(t,n.height),e.stroke();for(let t=0;t<=n.height;t+=gt)e.beginPath(),e.moveTo(0,t),e.lineTo(n.width,t),e.stroke()}const en=bt(async(n,e,t)=>{let s=e,l=t,a=0,i=0;for(let u=0;u<t;u++)for(let o=0;o<e;o++){const r=(u*e+o)*4,f=n[r],c=n[r+3];f<=30&&c>0&&(s=Math.min(s,o),l=Math.min(l,u),a=Math.max(a,o),i=Math.max(i,u))}return console.log({x:s,y:l,width:a-s+1,height:i-l+1}),s<=a&&l<=i?{x:s,y:l,width:a-s+1,height:i-l+1}:null}),ie=5;async function tn(n){const e=document.createElement("canvas");e.height=n.height,e.width=n.width;const t=e.getContext("2d");t.drawImage(n,0,0);const s=t.getImageData(0,0,e.width,e.height),l=s.data;for(let f=0;f<l.length;f+=4){const c=l[f];l[f+3],c>100&&(l[f+3]=0)}t.putImageData(s,0,0);const a=await en(l,e.width,e.height);if(!a)return alert("no bounding box!");const i=document.createElement("canvas");i.width=a.width+ie*2,i.height=a.height+ie*2,i.getContext("2d").drawImage(e,a.x-ie,a.y-ie,a.width+ie*2,a.height+ie*2,0,0,a.width+ie*2,a.height+ie*2);const o=i.toDataURL("image/png"),r=document.createElement("a");r.href=o,r.download="bounding-box.png",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function nn(n){let e,t,s,l,a,i,u,o="+",r,f,c="-",d,y,A="reset",S,M,T,R,x;return M=new yt({props:{onClick:n[15],text:"Download as Image"}}),{c(){e=b("section"),t=b("div"),s=b("canvas"),l=E(),a=b("div"),i=b("div"),u=b("button"),u.textContent=o,r=E(),f=b("button"),f.textContent=c,d=E(),y=b("button"),y.textContent=A,S=E(),z(M.$$.fragment),this.h()},l(v){e=w(v,"SECTION",{class:!0});var D=k(e);t=w(D,"DIV",{class:!0});var I=k(t);s=w(I,"CANVAS",{class:!0,style:!0,height:!0,width:!0}),k(s).forEach(m),I.forEach(m),l=F(D),a=w(D,"DIV",{class:!0});var C=k(a);i=w(C,"DIV",{class:!0});var W=k(i);u=w(W,"BUTTON",{class:!0,"data-svelte-h":!0}),le(u)!=="svelte-191nnqa"&&(u.textContent=o),r=F(W),f=w(W,"BUTTON",{class:!0,"data-svelte-h":!0}),le(f)!=="svelte-c6t4of"&&(f.textContent=c),W.forEach(m),d=F(C),y=w(C,"BUTTON",{class:!0,"data-svelte-h":!0}),le(y)!=="svelte-1nxnlaz"&&(y.textContent=A),C.forEach(m),S=F(D),Z(M.$$.fragment,D),D.forEach(m),this.h()},h(){g(s,"class","absolute top-0 left-0 origin-top-left border-8 border-blue-500 rounded cursor-move canvas"),nt(s,"transform","scale("+n[1]+", "+n[1]+") translate("+n[3]+"px, "+n[4]+"px)"),g(s,"height",Le),g(s,"width",Xe),g(t,"class","relative w-[500px] h-[500px] shadow shadow-black rounded overflow-clip"),g(u,"class","px-2 py-[2px] bg-gray-300 rounded"),g(f,"class","px-2 py-[2px] bg-gray-300 rounded"),g(i,"class","flex flex-row gap-2"),g(y,"class","px-2 py-[2px] bg-gray-300 rounded w-full"),g(a,"class","absolute flex flex-col gap-2 font-mono w-min top-2 left-2"),g(e,"class","relative flex flex-col gap-2")},m(v,D){U(v,e,D),p(e,t),p(t,s),n[10](s),p(e,l),p(e,a),p(a,i),p(i,u),p(i,r),p(i,f),p(a,d),p(a,y),p(e,S),K(M,e,null),T=!0,R||(x=[X(t,"pointerdown",n[11]),X(t,"pointerup",n[12]),X(t,"pointerleave",n[13]),X(t,"pointercancel",n[14]),X(t,"wheel",n[7]),X(t,"pointermove",n[8]),X(u,"pointerup",n[5]),X(f,"pointerup",n[6]),X(y,"pointerup",n[9])],R=!0)},p(v,[D]){(!T||D&26)&&nt(s,"transform","scale("+v[1]+", "+v[1]+") translate("+v[3]+"px, "+v[4]+"px)");const I={};D&1&&(I.onClick=v[15]),M.$set(I)},i(v){T||(j(M.$$.fragment,v),T=!0)},o(v){G(M.$$.fragment,v),T=!1},d(v){v&&m(e),n[10](null),J(M),R=!1,Re(x)}}}const Le=2e3,Xe=2e3;function sn(n,e,t){let{canvas:s}=e,l=1,a=!1,i=-Xe/2+200,u=-Le/2+200;const o=()=>t(1,l=Math.min(3,l+.1)),r=()=>t(1,l=Math.max(.1,l-.1));function f(v){v.preventDefault();const D=v.deltaY*-5e-4,I=Math.min(Math.max(l+D,.1),3);t(1,l=I)}function c(v){a!==!1&&(t(3,i+=v.movementX),t(4,u+=v.movementY))}function d(){t(1,l=1),t(3,i=-Xe/2+200),t(4,u=-Le/2+200)}let y;_t(()=>{y=s.getContext("2d"),kt(s,y)});function A(v){Y[v?"unshift":"push"](()=>{s=v,t(0,s)})}const S=()=>t(2,a=!0),M=()=>t(2,a=!1),T=()=>t(2,a=!1),R=()=>t(2,a=!1),x=async()=>await tn(s);return n.$$set=v=>{"canvas"in v&&t(0,s=v.canvas)},[s,l,a,i,u,o,r,f,c,d,A,S,M,T,R,x]}class ln extends fe{constructor(e){super(),ce(this,e,sn,nn,ue,{canvas:0})}}function an(n){let e,t,s,l="Make your custom L-System!",a,i,u,o,r,f,c,d,y,A;function S(x){n[4](x)}let M={onSubmit:n[3]};n[0]!==void 0&&(M.parameters=n[0]),u=new Kt({props:M}),Y.push(()=>se(u,"parameters",S)),f=new Qt({});function T(x){n[5](x)}let R={};return n[1]!==void 0&&(R.canvas=n[1]),d=new ln({props:R}),Y.push(()=>se(d,"canvas",T)),{c(){e=b("div"),t=b("div"),s=b("h1"),s.textContent=l,a=E(),i=b("div"),z(u.$$.fragment),r=E(),z(f.$$.fragment),c=E(),z(d.$$.fragment),this.h()},l(x){e=w(x,"DIV",{class:!0});var v=k(e);t=w(v,"DIV",{class:!0});var D=k(t);s=w(D,"H1",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-g0ul30"&&(s.textContent=l),a=F(D),i=w(D,"DIV",{class:!0});var I=k(i);Z(u.$$.fragment,I),r=F(I),Z(f.$$.fragment,I),c=F(I),Z(d.$$.fragment,I),I.forEach(m),D.forEach(m),v.forEach(m),this.h()},h(){g(s,"class","w-full px-4 py-4 text-3xl text-center rounded shadow shadow-black"),g(i,"class","flex flex-row gap-5 h-min"),g(t,"class","flex flex-col gap-5 w-min"),g(e,"class","flex flex-row items-center justify-center w-full h-full p-10")},m(x,v){U(x,e,v),p(e,t),p(t,s),p(t,a),p(t,i),K(u,i,null),p(i,r),K(f,i,null),p(i,c),K(d,i,null),A=!0},p(x,[v]){const D={};v&7&&(D.onSubmit=x[3]),!o&&v&1&&(o=!0,D.parameters=x[0],ne(()=>o=!1)),u.$set(D);const I={};!y&&v&2&&(y=!0,I.canvas=x[1],ne(()=>y=!1)),d.$set(I)},i(x){A||(j(u.$$.fragment,x),j(f.$$.fragment,x),j(d.$$.fragment,x),A=!0)},o(x){G(u.$$.fragment,x),G(f.$$.fragment,x),G(d.$$.fragment,x),A=!1},d(x){x&&m(e),J(u),J(f),J(d)}}}function rn(n,e,t){let s={axiom:"",rules:{},actions:{},angle:45,iterationCount:5,length:2},l,a;_t(()=>t(2,a=l.getContext("2d")));const i=()=>$t(l,a,s);function u(r){s=r,t(0,s)}function o(r){l=r,t(1,l)}return[s,l,a,i,u,o]}class cn extends fe{constructor(e){super(),ce(this,e,rn,an,ue,{})}}export{cn as component};
